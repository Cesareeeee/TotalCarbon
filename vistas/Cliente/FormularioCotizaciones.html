<!-- 
    Formulario de Cotizaciones del Cliente
    Archivo: vistas/Cliente/FormularioCotizaciones.html
    Propósito: Interfaz para que los clientes envíen cotizaciones
-->

<div class="cotizaciones-container">
    <!-- Encabezado -->
    <div class="cotizaciones-header">
        <h2>Mis Cotizaciones</h2>
        <p>Envía una nueva cotización o revisa el estado de las existentes</p>
    </div>

    <!-- Formulario de Nueva Cotización -->
    <div class="formulario-cotizacion">
        <h3>📝 Nueva Cotización</h3>
        
        <form id="formularioCotizacion" enctype="multipart/form-data" autocomplete="on">
            <!-- Información Personal -->
            <div class="form-row">
                <div class="form-group">
                    <label for="nombre">
                        Nombre Completo
                        <span class="required">*</span>
                    </label>
                    <input type="text" id="nombre" name="nombre" required placeholder="Tu nombre completo" autocomplete="name">
                </div>
                <div class="form-group">
                    <label for="telefono">
                        Teléfono
                        <span class="required">*</span>
                    </label>
                    <input type="tel" id="telefono" name="telefono" required placeholder="Tu teléfono" autocomplete="tel">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">
                        Correo Electrónico
                        <span class="required">*</span>
                    </label>
                    <input type="email" id="email" name="email" required placeholder="Tu correo" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="direccion">
                        Dirección
                        <span class="required">*</span>
                    </label>
                    <input type="text" id="direccion" name="direccion" required placeholder="Tu dirección">
                </div>
            </div>

            <!-- Información de la Bicicleta -->
            <h4 style="margin-top: 25px; margin-bottom: 15px; color: #333;">🚴 Información de la Bicicleta</h4>

            <div class="form-row">
                <div class="form-group">
                    <label for="marca">
                        Marca
                        <span class="required">*</span>
                    </label>
                    <input type="text" id="marca" name="marca" required placeholder="Ej: Trek, Giant, Specialized">
                </div>
                <div class="form-group">
                    <label for="modelo">
                        Modelo
                        <span class="required">*</span>
                    </label>
                    <input type="text" id="modelo" name="modelo" required placeholder="Ej: FX 3, Escape 3">
                </div>
            </div>

            <!-- Detalles del Servicio -->
            <h4 style="margin-top: 25px; margin-bottom: 15px; color: #333;">🔧 Detalles del Servicio</h4>

            <div class="form-row">
                <div class="form-group">
                    <label for="zonaAfectada">
                        Zona Afectada
                        <span class="required">*</span>
                    </label>
                    <select id="zonaAfectada" name="zonaAfectada" required>
                        <option value="">-- Selecciona una zona --</option>
                        <option value="Cuadro">Cuadro</option>
                        <option value="Rueda Delantera">Rueda Delantera</option>
                        <option value="Rueda Trasera">Rueda Trasera</option>
                        <option value="Manillar">Manillar</option>
                        <option value="Sillín">Sillín</option>
                        <option value="Pedales">Pedales</option>
                        <option value="Cadena">Cadena</option>
                        <option value="Frenos">Frenos</option>
                        <option value="Cambios">Cambios</option>
                        <option value="Otra">Otra</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tipoTrabajo">
                        Tipo de Trabajo
                        <span class="required">*</span>
                    </label>
                    <select id="tipoTrabajo" name="tipoTrabajo" required>
                        <option value="">-- Selecciona un tipo --</option>
                        <option value="Reparación">Reparación</option>
                        <option value="Mantenimiento">Mantenimiento</option>
                        <option value="Personalización">Personalización</option>
                        <option value="Inspección">Inspección</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="tipoReparacion">
                        Tipo de Reparación
                        <span class="required">*</span>
                    </label>
                    <div class="opciones-reparacion" id="opcionesReparacion">
                        <button type="button" class="opcion-reparacion" data-valor="CHEQUEO_ESTRUCTURAL">
                            <i class="fas fa-search"></i>
                            <span>Chequeo Estructural</span>
                        </button>
                        <button type="button" class="opcion-reparacion" data-valor="FISURA">
                            <i class="fas fa-code-branch"></i>
                            <span>Fisura</span>
                        </button>
                        <button type="button" class="opcion-reparacion" data-valor="FRACTURA">
                            <i class="fas fa-bolt"></i>
                            <span>Fractura</span>
                        </button>
                        <button type="button" class="opcion-reparacion" data-valor="RECONSTRUCCION">
                            <i class="fas fa-tools"></i>
                            <span>Reconstrucción</span>
                        </button>
                        <button type="button" class="opcion-reparacion" data-valor="ADAPTACION">
                            <i class="fas fa-exchange-alt"></i>
                            <span>Adaptación</span>
                        </button>
                        <button type="button" class="opcion-reparacion" data-valor="OTROS">
                            <i class="fas fa-ellipsis-h"></i>
                            <span>Otros</span>
                        </button>
                        <input type="hidden" id="tipoReparacion" name="tipoReparacion" required>
                    </div>
                    <div class="invalid-feedback">Por favor selecciona un tipo de reparación.</div>
                </div>
            </div>

            <div class="form-row full">
                <div class="form-group">
                    <label for="descripcionOtros">
                        Descripción Adicional
                    </label>
                    <textarea id="descripcionOtros" name="descripcionOtros" placeholder="Describe el problema o lo que necesitas..."></textarea>
                </div>
            </div>

            <!-- Sección de Imágenes -->
            <h4 style="margin-top: 25px; margin-bottom: 15px; color: #333;">📸 Imágenes (Máximo 5)</h4>

            <div class="seccion-imagenes" onclick="document.getElementById('imagenesCotizacion').click()">
                <i class="fas fa-cloud-upload-alt"></i>
                <h4>Sube tus imágenes</h4>
                <p>Haz clic aquí o arrastra imágenes (máximo 5, 5MB cada una)</p>
                <input type="file" id="imagenesCotizacion" name="imagenes" multiple accept="image/*">
            </div>

            <!-- Preview de Imágenes -->
            <div id="previewImagenes" class="preview-imagenes"></div>

            <!-- Botones de Acción -->
            <div class="form-actions">
                <button type="reset" class="btn btn-secondary">
                    <i class="fas fa-redo"></i> Limpiar
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i> Enviar Cotización
                </button>
            </div>
        </form>
    </div>

    <!-- Lista de Cotizaciones -->
    <div style="margin-top: 40px;">
        <h3 style="margin-bottom: 20px; color: #333;">📋 Mis Cotizaciones Anteriores</h3>
        <div id="listaCotizaciones" class="lista-cotizaciones">
            <!-- Se llena dinámicamente con JavaScript -->
        </div>
    </div>
</div>

<!-- Estilos -->
<link rel="stylesheet" href="../../recursos/css/Cliente/FormularioCotizaciones.css?v=1">

<!-- Scripts -->
<script src="../../recursos/js/Cliente/FormularioCotizaciones.js?v=1"></script>

<script>
    // Cargar cotizaciones cuando se carga la página
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Cargando cotizaciones...');
        cargarCotizaciones();
    });
</script>

